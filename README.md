# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

## Описание данных

```
export interface IOrderForm {
	payment: OrderPayment;
	email: string;
	phone: string;
	address: string;
}
```

Описывает форму заказа

```
export interface ICard {
	id: string;
	description: string;
	image: string;
	title: string;
	category: string;
	price: number | null;
}
```

Описывает данные карточки товара

```
export interface IAppState {
	catalog: ICard[];
	basket: string[];
	order: IOrder | null;
	loading: boolean;
}
```

Описывает типы состояния приложения

```
interface ISuccess {
	total: number;
}
```

Описывает итоговую сумму в случае успешной покупки

```
interface ISuccessActions {
	onClick: () => void;
}
```

Описывает возможные действия в случае удачной покупки

```
interface IModalData {
	content: HTMLElement;
}
```

Описывает типы данных модального окна

```
interface IFormState {
	valid: boolean;
	errors: string[];
}
```

Описывает типы состояния формы

```
export interface IShopAPI {
	getProductsList: () => Promise<ICard[]>;
	getProductItem: (id: string) => Promise<ICard>;
	orderProducts: (order: IOrder) => Promise<IOrderResult>;
}
```

Описывает методы работы с Api

```
interface IPage {
	counter: number;
	catalog: HTMLElement[];
}
```

Описывает типы счетчика корзины и каталога на странице

```
interface ICardActions {
	onClick: (event: MouseEvent) => void;
}
```

Описывает возможные действия с карточкой

## Базовый код

### 1. Класс Component<T>

Абстрактный класс, являющийся основой для всех компонентов в проекте. Он предоставляет основные методы для работы с элементами DOM.

Конструктор класса принимает корневой DOM-элемент, в котором будет размещен компонент.

Класс имеет такие методы:

Метод toggleClass используется для переключения класса элемента. Принимает элемент DOM, название класса и необязательный флаг force, определяющий необходимость принудительного переключения класса.

Метод setText устанавливает текстовое содержимое элемента. Принимает элемент DOM и значение, которое необходимо установить в качестве текста.

Метод setDisabled используется для установки состояния блокировки элемента. Принимает элемент DOM и булевое значение, определяющее, нужно ли заблокировать элемент.

Метод setHidden скрывает элемент, устанавливая свойство display: none.

Метод setVisible показывает скрытый элемент, удаляя свойство display: none.

Метод setImage устанавливает изображение для элемента img. Принимает элемент изображения DOM, URL изображения src и необязательный параметр alt - альтернативный текст для изображения.

Метод render используется для рендеринга компонента. Принимает необязательные данные data, которые могут быть использованы при рендеринге компонента. Возвращает корневой DOM-элемент компонента.

### 2. Класс EventEmitter

Реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков
о наступлении события.

Класс имеет методы on, off, emit — для подписки на событие, отписки от события и уведомления
подписчиков о наступлении события соответственно.

Дополнительно реализованы методы onAll и offAll — для подписки на все события и сброса всех
подписчиков.

Метод trigger, генерирует заданное событие с заданными
аргументами. Это позволяет передавать его в качестве обработчика события в другие классы.

### 3. Класс Api

Базовый класс для работы с Api. Конструктор принимает в себя базовый URL и дополнительные опции запроса к серверу.

Класс имеет методы handleResponse, get, post - для обработки ответа с сервера, get-запроса и post-запроса.

### 4. Класс Model

Базовый класс для создания моделей. Конструктор принимает в себя данные и объект событий.

## Компоненты модели данных (бизнес-логика)

### 1. Класс Basket

Класс отвечает за работу с корзиной. Он наследуется от базового класса Component. Конструктор принимает в себя родительский контейнер и объект событий. Класс имеет два сеттера: для установки товаров и итоговый цены. Также класс имеет метод для удаления товара из корзины

### 2. Класс Form

Класс отвечает за работу с формой заказа. Он также наследуется от базового класса Component. Конструктор принимает в себя родительский контейнер и объект событий. Метод onInputChange предназначен для обработки изменений ввода пользователем. сеттеры valid и errors отвечают за управление доступностью кнопки отправки формы в зависимости от валидности данных в форме и установки ошибок соответственно. Метод render обновляет внешний вид формы в соответствии с переданным состоянием.

### 3. Класс Modal

Класс отвечает за работу с модальными окнами. Он наследуется от базового класса Component. Конструктор принимает в себя родительский контейнер и объект событий. Сеттер content отвечает за установку контента в модальное окно. Метод open, close и render отвечают за открытие, закрытие и рендер модального окна.

### 4. Класс Success

Класс отвечает за показ сообщения об успешном оформлении заказа. Он наследуется от базового класса Component. Конструктор принимает в себя родительский контейнер и объект событий. Метод ensureElement из модуля utils используется для получения элемента DOM с заданным селектором внутри указанного контейнера.

## Компоненты отображения

### 1. Класс Card

Класс отвечает за отображение карточки. Конструктор принимает в себя имя блока, HTML-элемент, содержащий компонент карточки и действия, связанные с ней.

### 2. Класс Order

Класс отвечает за управление данными в форме заказа. Конструктор принимает в себя контейнер формы и действия, связанные с ним. Сеттеры payment, address, email и phone устанавливают значения способы оплаты, адреса, почты и телефона соответственно.

### 3. Класс Page

Класс Page наследует функциональность от класса Component и реализует интерфейс IPage. Он предназначен для работы с элементами страницы, такими как счетчик корзины и каталог товаров. Принимает элемент контейнера страницы и объект событий. Сеттеры устанавливают счетчик корзины и каталог товаров.

### 4. Класс AppState

Класс AppState представляет собой модель состояния приложения. Методы класса отвечают за получение итоговой цены, установку каталога продуктов и инициации события изменения каталога и за проверку валидности заказа.
